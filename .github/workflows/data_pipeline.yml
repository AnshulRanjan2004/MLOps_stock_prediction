name: data upload to azure

extends:
  template: data_details.yml 

on:
  push:
    branches: [ data-upload-automation ]
  pull_request:
    branches: [ main ]
  
jobs:
  checker:
    runs-on: ubuntu-latest
    steps:
    - run: echo {{parameters.ticker}}

  # downloaddata:
  #   runs-on: ubuntu-latest
  #   steps:
  #   - name: checkout repository
  #     uses: actions/checkout@v2
  #   - name: setup python 3.9
  #     uses: actions/setup-python@v4
  #     with: 
  #       python-version: "3.9"
  #   - name: install python packages
  #     run: |
  #       python -m pip install --upgrade pip
  #       pip install -r requirements.txt
  #   - name: download ticker data and update yml file
  #     run: python data_download.py --ticker NTPC.NS --start 366 --end 1 #####
  #     id: data
  #     working-directory: jobs
  #   - name: push new file to github
  #     run: |
  #       git config --local user.email "action@github.com"
  #       git config --local user.name "GitHub Action"
  #       git add -A
  #       git commit -m "Latest ticker data downloaded and YAML file updated" || exit 0
  #       git push https://x-access-token:${GITHUB_TOKEN}@github.com/${GITHUB_REPOSITORY}.git HEAD
  #     env:
  #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  # uploaddata:
  #   needs: downloaddata
  #   runs-on: ubuntu-latest
  #   steps:
  #   - name: checkout repository
  #     uses: actions/checkout@v2
  #   - name: azure login
  #     uses: azure/login@v1
  #     with:
  #       creds: ${{secrets.AZURE_CREDENTIALS}}
  #   - name: setup
  #     run: bash setup.sh
  #     working-directory: cli
  #     continue-on-error: true
  #   - name: upload to azure
  #     run: az ml data create -f jobs/data_upload.yml

# # #
# Remaining: if clause to not run the azure upload step if file is not downloaded
# # #